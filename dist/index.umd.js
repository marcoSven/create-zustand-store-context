!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("zustand"),require("zustand/middleware"),require("zustand/shallow")):"function"==typeof define&&define.amd?define(["exports","react","zustand","zustand/middleware","zustand/shallow"],t):t((e||self).createZustandStoreContext={},e.react,e.zustand,e.middleware,e.shallow)}(this,function(e,t,r,n,u){function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a.apply(this,arguments)}var i=["migrate","partialize"],o="DEFAULT_ZUSTAND_STORE_Value";e.createZustandStoreContext=function(e){var f,s=e.defaultState,c=e.localStorage,l=e.name,d=c?function(e){var t=c.migrate,u=c.partialize,o=function(e,t){if(null==e)return{};var r,n,u={},a=Object.keys(e);for(n=0;n<a.length;n++)t.indexOf(r=a[n])>=0||(u[r]=e[r]);return u}(c,i),f=r.createStore()(n.persist(function(){return e},a({},o,{migrate:t?function(r,n){return"object"==typeof(u=r)&&null!==u&&!Array.isArray(u)&&Object.keys(u).every(function(e){return"string"==typeof e})?function(t){return function(t){for(var r={},n=0,u=Object.keys(t);n<u.length;n++)r[u[n]]=1;for(var a=0,i=Object.keys(c&&(null==c.partialize?void 0:c.partialize(e))||e);a<i.length;a++){var o=i[a];if(!r[o])return!1;r[o]=2}for(var f in r)if(1===r[f])return!1;return!0}(t)?t:e}(t(r,n)):e;var u}:void 0,partialize:u||function(e){return e}})));return c.force&&f.setState(e),f}:function(e){return r.createStore(function(){return e})},p=d(a({},s,((f={})[o]=!0,f))),v=t.createContext(p);return{storeContext:v,useState:function(e){var n=t.useContext(v);if(void 0===n||n.getState()[o])throw new Error((l?l+": ":"")+"useState must be used within a provider");var i=r.useStore(n,null!=e?e:function(){return{}},u.shallow);return a({},n,i,{setState:t.useCallback(function(e){return n.setState(function(t){return a({},t,e)})},[n])})},useStore:function(e,r){void 0===r&&(r={});var n=t.useRef(e),u=t.useRef();return u.current&&n.current===e||(u.current=d(a({},s,r)),n.current=e),u.current}}}});
//# sourceMappingURL=index.umd.js.map
