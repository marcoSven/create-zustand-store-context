import{createContext as t,useRef as r,useContext as e,useCallback as n}from"react";import{createStore as o,useStore as a}from"zustand";import{persist as i}from"zustand/middleware";import{shallow as u}from"zustand/shallow";function s(){return s=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},s.apply(this,arguments)}const c=["migrate","partialize"],f="DEFAULT_ZUSTAND_STORE_Value";function l({defaultState:l,localStorage:p,name:m}){const d=p?t=>{const{migrate:r,partialize:e}=p,n=function(t,r){if(null==t)return{};var e,n,o={},a=Object.keys(t);for(n=0;n<a.length;n++)r.indexOf(e=a[n])>=0||(o[e]=t[e]);return o}(p,c),a=o()(i(()=>t,s({},n,{migrate:r?(e,n)=>{return"object"==typeof(o=e)&&null!==o&&!Array.isArray(o)&&Object.keys(o).every(t=>"string"==typeof t)?(r=>(r=>{const e={};for(const t of Object.keys(r))e[t]=1;for(const r of Object.keys(p&&(null==p.partialize?void 0:p.partialize(t))||t)){if(!e[r])return!1;e[r]=2}for(const t in e)if(1===e[t])return!1;return!0})(r)?r:t)(r(e,n)):t;var o}:void 0,partialize:e||(t=>t)})));return p.force&&a.setState(t),a}:t=>o(()=>t),y=d(s({},l,{[f]:!0})),S=t(y);return{storeContext:S,useState:function(t){const r=e(S);if(void 0===r||r.getState()[f])throw new Error((m?m+": ":"")+"useState must be used within a provider");const o=a(r,null!=t?t:()=>({}),u);return s({},r,o,{setState:n(t=>r.setState(r=>s({},r,t)),[r])})},useStore:(t,e={})=>{const n=r(t),o=r();return o.current&&n.current===t||(o.current=d(s({},l,e)),n.current=t),o.current}}}export{l as createZustandStoreContext};
//# sourceMappingURL=index.modern.js.map
