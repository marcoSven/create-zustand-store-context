var r=require("react"),t=require("zustand"),e=require("zustand/middleware"),n=require("zustand/shallow");function u(){return u=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},u.apply(this,arguments)}var a=["migrate","partialize"],i="DEFAULT_ZUSTAND_STORE_Value";exports.createZustandStoreContext=function(o){var c,f=o.defaultState,s=o.localStorage,l=o.name,v=s?function(r){var n=s.migrate,i=s.partialize,o=function(r,t){if(null==r)return{};var e,n,u={},a=Object.keys(r);for(n=0;n<a.length;n++)t.indexOf(e=a[n])>=0||(u[e]=r[e]);return u}(s,a),c=t.createStore()(e.persist(function(){return r},u({},o,{migrate:n?function(t,e){return"object"==typeof(u=t)&&null!==u&&!Array.isArray(u)&&Object.keys(u).every(function(r){return"string"==typeof r})?function(t){return function(t){for(var e={},n=0,u=Object.keys(t);n<u.length;n++)e[u[n]]=1;for(var a=0,i=Object.keys(s&&(null==s.partialize?void 0:s.partialize(r))||r);a<i.length;a++){var o=i[a];if(!e[o])return!1;e[o]=2}for(var c in e)if(1===e[c])return!1;return!0}(t)?t:r}(n(t,e)):r;var u}:void 0,partialize:i||function(r){return r}})));return s.force&&c.setState(r),c}:function(r){return t.createStore(function(){return r})},d=v(u({},f,((c={})[i]=!0,c))),p=r.createContext(d);return{storeContext:p,useState:function(e){var a=r.useContext(p);if(void 0===a||a.getState()[i])throw new Error((l?l+": ":"")+"useState must be used within a provider");var o=t.useStore(a,null!=e?e:function(){return{}},n.shallow);return u({},a,o,{setState:r.useCallback(function(r){return a.setState(function(t){return u({},t,r)})},[a])})},useStore:function(t,e){void 0===e&&(e={});var n=r.useRef(t),a=r.useRef();return a.current&&n.current===t||(a.current=v(u({},f,e)),n.current=t),a.current}}};
//# sourceMappingURL=index.cjs.map
